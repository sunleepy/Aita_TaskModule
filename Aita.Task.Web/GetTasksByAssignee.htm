<!DOCTYPE html>
<html>
<head>
    <title>待办任务</title>
    <link type="text/css" rel="Stylesheet" href="/content/bootstrap/css/bootstrap.min.css" />
    <line type="text/css" rel="Stylesheet" href="/content/bootstrap/css/datepicker.css" />
    <link type="text/css" rel="Stylesheet" href="/content/css/base.css" />
    <script src="/Content/jquery/jquery-1.7.2.min.js"></script>
    <script src="/Content/angular/angular-1.0.1.min.js"></script>
    <script src="/Content/bootstrap/js/bootstrap-datepicker.js"></script>
    <script src="/Content/bootstrap/js/locales/bootstrap-datepicker.zh-CN.js" charset="UTF-8"></script>
    <script src="/Content/js/moment.min.js"></script>
    <script src="/Scripts/modules/aitatask.js"></script>
    <script src="/Scripts/controllers/getTasksByAssignee.js"></script>
</head>
<body>
    <div class="container-fluid" style="margin-top:10px;" ng-app="aitatask">
        <div>
            <h4>待办任务</h4>
            <hr />
        </div>
        <div id="loading-cooper" style="display:none;">
            <div class="progress progress-striped active" style="width: 250px; margin: auto;
                margin-top: 40px;">
                <div class="bar" style="width: 100%;">
                    loading...</div>
            </div>
        </div>
        <div id="main-cooper" ng-controller="GetTasksByAssigneeCtrl" style="display:none;">
        <div class="option">
            <button ng-class="meAssigntoMeIcon()" ng-Click="chooseMeAssigntoMe()">
            {{meAssigntoMe.name}}({{meAssigntoMe.count}})</button>
            <button ng-class="otherAssignToMeIcon()" ng-Click="chooseOtherAssignToMe()">
            {{otherAssignToMe.name}}({{otherAssignToMe.count}})</button>
            <button ng-class="sourceIcon(s)" ng-repeat="s in sources" ng-Click="chooseSource(s)">
            {{s.name}}({{s.count}})</button>
        </div>
        <div>
            <span class="btn-group">
                  <button class="btn">默认</button>
                  <button class="btn">优先级</button>
            </span>
        </div>
        <div class="list">
            <table class="todolist table">
                <thead>
                    <tr class="row_header">
                        <td class="cell_isCompleted"></td>
                        <td class="cell_source">任务来源</td>
                        <td class="cell_summary">摘要</td>
                        <td class="cell_dueTime">完成时间/优先级</td>
                    </tr>
                </thead>
                <tbody ng-show="equalDisplayMode(1)">
                    <tr class="row_body" ng-repeat="t in tasks">
                        <td class="cell_isCompleted" ng-click="setIsCompleted(t,!t.isCompleted);">
                            <i ng-class="completedIcon(t);"></i>
                        </td>
                        <td>
                            {{t.source}}
                        </td>
                        <td class="cell_summary" ng-click="openUrl(t)">
                            <div class="summary">{{t.subject}}<span style="color:Gray;">&nbsp; &nbsp; -&nbsp; &nbsp; {{t.body}}</span></div>
                        </td>
                        <td>
                            {{getFormatDate(t.dueTime)}} {{t.priority}}
                        </td>
                    </tr>
                </tbody>
                <tbody ng-show="equalDisplayMode(2)">
                    <tr ng-repeat="(key, value) in taskDict">
                        <td colspan="4">
                            <table class="table">
                                <tr>
                                    {{key}} 
                                </tr>
                                <tr class="row_body" ng-repeat="t in value">
                                    <td class="cell_isCompleted" ng-click="setIsCompleted(t,!t.isCompleted);">
                                        <i ng-class="completedIcon(t);"></i>
                                    </td>
                                    <td>
                                        {{t.source}}
                                    </td>
                                    <td class="cell_summary" ng-click="openUrl(t)">
                                        <div class="summary">{{t.subject}}<span style="color:Gray;">&nbsp; &nbsp; -&nbsp; &nbsp; {{t.body}}</span></div>
                                    </td>
                                    <td>
                                        {{getFormatDate(t.dueTime)}} {{t.priority}}
                                    </td>
                                </tr>
                            </table>
                        
                        </td>
                    </tr>

                </tbody>
        </table>
        </div>
    </div>
    </div>
</body>
</html>